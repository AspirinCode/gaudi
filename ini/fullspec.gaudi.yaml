##############
# GAUDIasm: Genetic Algorithms for Universal
# Design Inference and Atomic Scale Modeling
# Authors:  Jaime Rodriguez-Guerra Pedregal
#            <jaime.rodriguezguerra@uab.cat>
#           Jean-Didier Mar√©chal
#            <jeandidier.marechal@uab.cat>
# Web: https://bitbucket.org/jrgp/gaudi
##############
general:
    outputpath: /path/to/output/
    name: nickel
    precision: 2
    compress: 1

ga:
    pop: 100
    gens: 10
    mu: 0.75
    lambda_: 0.75
    mut_eta: 5
    mut_pb: 0.10
    mut_indpb: 0.05
    cx_eta: 5
    cx_pb: 0.8
    similarity_rmsd: 2.5
    history: 0

###
# GENOME
###
genes: 
    -   name: Protein
        type: gaudi.genes.molecule
        path: /path/to/protein.mol2

    -   name: Ligand
        type: gaudi.genes.molecule
        path: /path/to/ligand.mol2/or/block/containing/dir/
        symmetry: [[ dirA, dirB ]]

    -   name: Rotamers
        type: gaudi.genes.rotamers
        residues: [ $Protein$/233, $Protein$/109]
        library: { dynameomics | dunbrack }
        mutations: []
        ligation: False

    # -   name: Normal Modes
    #     type: gaudi.genes.normalmodes
    #     target: protein

    -   name: Torsion
        type: gaudi.genes.torsion
        target: Ligand
        flexibility: 360

    -   name: Search
        type: gaudi.genes.search
        origin: [1.0, 5.0, 0.0]
        radius: 5.0
        precision: 3
        rotate: True
    # -   name: CovalentBond
    #     type: gaudi.genes.covalent  
    #     bond:   - [ $Ligand$/DUM, $Protein$/136 ]
    #             - [ $Ligand$/END, $Protein$/145 ]

###
# OBJECTIVES
###
objectives:
    -   name: Hbonds
        type: gaudi.objectives.hbonds
        weight: 1.0
        probe: Ligand
        radius: 5.0
        distance_tolerance: 0.4
        angle_tolerance: 20.0

    -   name: Clashes
        type: gaudi.objectives.contacts
        which: clashes #or hydrophobic
        weight: -1.0
        probe: Ligand
        radius: 5.0
        threshold: 0.6
        threshold_h: 0.2
        threshold_c: 0.6
        cutoff: 100.0

    -   name: DistanceAB
        type: gaudi.objectives.distance
        weight: -1.0
        threshold: covalent #or <n>
        tolerance: -0.1
        target: 929
        probes: [last] # or serialNumber

    -   name: AngleABC
        type: gaudi.objectives.angle 
        weight: -1.0
        threshold: 90.0 #degrees or 'planar'
        # serialnumbers, 3 for angle, 4 for dihedral
        # Careful, input order DOES matter
        target: [ Protein/123, Protein/456, Ligand/10, Ligand/9]

    -   name: Solvation
        type: gaudi.objectives.solvation
        weight: -1.0
        which: ses #or 'sas'
        target: Ligand

    -   name: Coordination
        type: gaudi.objectives.coordination
        weight: -1.0
        method: simple # or metalgeom 
        probe: Ligand/1
        radius: 3.5
        atomtypes: [ OE1, OE2, OD1, OD2, ND2 ]
        residues: [Protein/14, Protein/41, Protein/68, Protein/23, Protein/50, Protein/77]
        min_atoms: 1
        enforce_all_residues: True
        # params for 'simple'
        distance: 2.5
        angle: 90.0 # metal-ligand-neighbor
        dihedral: 180 # metal-ligand-neighbor1-neighbor2
        # params for 'metalgeom'
        geometry: tetrahedral # choose from MetalGeom.geomData.geometries.keys()
        threshold: 1.0 # max admitted RMSD

    -   name: DSX
        type: gaudi.objectives.dsx
        weight: -1.0
        binary: /path/to/dsx/binary
        potentials: /path/to/dir/containing/potentials/files
        protein: Protein
        ligand: Ligand
        # enable or disable terms in the list, respecting ORDER
        # [distance-dependent pair potentials, intramolecular clashes,
        # torsion potentials, sas potentials] 
        terms: [True, True, False, False]
        sorting: 1 # int between 0-6, read binary help for -S
        cofactor_handling: 1 # int between 0-7, read binary help for -I